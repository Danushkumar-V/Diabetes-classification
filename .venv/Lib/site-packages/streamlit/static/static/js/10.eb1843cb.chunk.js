/*! For license information please see 10.eb1843cb.chunk.js.LICENSE.txt */
(this["webpackJsonpstreamlit-browser"]=this["webpackJsonpstreamlit-browser"]||[]).push([[10],{2886:function(t,e){},2891:function(t,e){},3046:function(t,e){},3049:function(t,e){},3194:function(t,e){},3210:function(t,e){},3212:function(t,e){},3239:function(t,e){},3640:function(t,e){},5137:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return z}));var n=i(0),a=i(3684),o=i.n(a),s=i(3135),r=i.n(s),c=i(3136),h=i(2601),l=i(3675),p=i(2984),d=i(2979),w=i(2744),m=i(3613),b=i(3626),u=i(2602),g=i(163),j=i(108),x=i(38),S=i(165),f=i.n(S),k=i(26);class O extends Error{}class v extends Error{}class y{static async get(){const{commandLine:t,userMapboxToken:e}=k.a.current;return y.token&&y.commandLine===t.toLowerCase()||(y.token=""!==e?e:await this.fetchToken("https://data.streamlit.io/tokens.json","mapbox"),y.commandLine=t.toLowerCase()),y.token}static async fetchToken(t,e){try{const i=await f.a.get(t),{[e]:n}=i.data;if(null==n||""===n)throw new Error('Missing token "'.concat(e,'"'));return n}catch(i){throw new v("".concat(i.message," (").concat(t,")"))}}}y.token=void 0,y.commandLine=void 0,y.isRunningLocal=()=>{const{hostname:t}=window.location;return"localhost"===t||"127.0.0.1"===t};var T=i(97),V=i.n(T),L=i(109),C=i(5);var M=({error:t,width:e,deltaType:i})=>t instanceof O?Object(C.jsx)(L.a,{width:e,name:"No Mapbox token provided",message:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("p",{children:["To use ",Object(C.jsxs)("code",{children:["st.",i]})," or ",Object(C.jsx)("code",{children:"st.map"})," you need to set up a Mapbox access token."]}),Object(C.jsxs)("p",{children:["To get a token, create an account at"," ",Object(C.jsx)("a",{href:"https://mapbox.com",children:"https://mapbox.com"}),". It's free for moderate usage levels!"]}),Object(C.jsxs)("p",{children:["Once you have a token, just set it using the Streamlit config option ",Object(C.jsx)("code",{children:"mapbox.token"})," and don't forget to restart your Streamlit server at this point if it's still running, then reload this tab."]}),Object(C.jsxs)("p",{children:["See"," ",Object(C.jsx)("a",{href:"https://docs.streamlit.io/library/advanced-features/configuration#view-all-configuration-options",children:"our documentation"})," ","for more info on how to set config options."]})]})}):t instanceof v?Object(C.jsx)(L.a,{width:e,name:"Error fetching Streamlit Mapbox token",message:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("p",{children:"This app requires an internet connection."}),Object(C.jsx)("p",{children:"Please check your connection and try again."}),Object(C.jsxs)("p",{children:["If you think this is a bug, please file bug report"," ",Object(C.jsx)("a",{href:"https://github.com/streamlit/streamlit/issues/new/choose",children:"here"}),"."]})]})}):Object(C.jsx)(L.a,{width:e,name:"Error fetching Streamlit Mapbox token",message:t.message});var E=t=>e=>{class i extends n.PureComponent{constructor(i){super(i),this.initMapboxToken=async()=>{try{const t=await y.get();this.setState({mapboxToken:t,isFetching:!1})}catch(t){this.setState({mapboxTokenError:t,isFetching:!1})}},this.render=()=>{const{mapboxToken:i,mapboxTokenError:n,isFetching:a}=this.state,{width:o}=this.props;return n?Object(C.jsx)(M,{width:o,error:n,deltaType:t}):a?Object(C.jsx)(j.a,{body:"Loading...",kind:x.a.INFO,width:o}):Object(C.jsx)(e,{mapboxToken:i,...this.props})},this.state={isFetching:!0,mapboxToken:void 0,mapboxTokenError:void 0},this.initMapboxToken()}}return i.displayName="withMapboxToken(".concat(e.displayName||e.name,")"),V()(i,e)},F=i(7);const N=i.n(F)()("div",{target:"e1q4dr930"})((({width:t,height:e})=>({position:"relative",height:e,width:t})),"");i(3184);const D={classes:{...h,...d,...p,...w}};Object(u.registerLoaders)([m.CSVLoader,b.GLTFLoader]);const J=new l.JSONConverter({configuration:D});class P extends n.PureComponent{constructor(...t){super(...t),this.state={viewState:{bearing:0,pitch:0,zoom:11},initialized:!1,initialViewState:{}},this.componentDidMount=()=>{this.setState({initialized:!0})},this.createTooltip=t=>{const{element:e}=this.props;if(!t||!t.object||!e.tooltip)return!1;const i=JSON.parse(e.tooltip);return i.html?i.html=this.interpolate(t,i.html):i.text=this.interpolate(t,i.text),i},this.interpolate=(t,e)=>{const i=e.match(/{(.*?)}/g);return i&&i.forEach((i=>{const n=i.substring(1,i.length-1);t.object.hasOwnProperty(n)&&(e=e.replace(i,t.object[n]))})),e},this.onViewStateChange=({viewState:t})=>{this.setState({viewState:t})}}static getDerivedStateFromProps(t,e){const i=P.getDeckObject(t);if(!r()(i.initialViewState,e.initialViewState)){const t=Object.keys(i.initialViewState).reduce(((t,n)=>i.initialViewState[n]===e.initialViewState[n]?t:{...t,[n]:i.initialViewState[n]}),{});return{viewState:{...e.viewState,...t},initialViewState:i.initialViewState}}return null}render(){const t=P.getDeckObject(this.props),{viewState:e}=this.state;return Object(C.jsx)(N,{className:"stDeckGlJsonChart",width:t.initialViewState.width,height:t.initialViewState.height,children:Object(C.jsx)(o.a,{viewState:e,onViewStateChange:this.onViewStateChange,height:t.initialViewState.height,width:t.initialViewState.width,layers:this.state.initialized?t.layers:[],getTooltip:this.createTooltip,controller:!0,children:Object(C.jsx)(c.StaticMap,{height:t.initialViewState.height,width:t.initialViewState.width,mapStyle:t.mapStyle&&("string"===typeof t.mapStyle?t.mapStyle:t.mapStyle[0]),mapboxApiAccessToken:this.props.mapboxToken})})})}}P.getDeckObject=t=>{const{element:e,width:i,height:n}=t,a=JSON.parse(e.json);return n?(a.initialViewState.height=n,a.initialViewState.width=i):(a.initialViewState.height||(a.initialViewState.height=500),e.useContainerWidth&&(a.initialViewState.width=i)),delete a.views,J.convert(a)};var z=E("st.pydeck_chart")(Object(g.a)(P))}}]);