/*! For license information please see 41.9b840763.chunk.js.LICENSE.txt */
(this["webpackJsonpstreamlit-browser"]=this["webpackJsonpstreamlit-browser"]||[]).push([[41],{5148:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return S}));var a=i(0),s=i.n(a),o=i(27),n=i(5164),r=i(25),l=i(2855),d=i(162),h=i(13),m=i(29),c=i(67),p=i.n(c),u=i(115),b=i(116),g=i(51),f=i(7),T=i.n(f),y=i(21);const x=T()("div",{target:"e88czh80"})((({disabled:e,theme:t})=>({alignItems:"center",backgroundColor:e?t.colors.gray:t.colors.primary,borderTopLeftRadius:"100%",borderTopRightRadius:"100%",borderBottomLeftRadius:"100%",borderBottomRightRadius:"100%",borderTopStyle:"none",borderBottomStyle:"none",borderRightStyle:"none",borderLeftStyle:"none",boxShadow:"none",display:"flex",height:t.radii.xl,justifyContent:"center",width:t.radii.xl,":focus":{boxShadow:"0 0 0 0.2rem ".concat(Object(y.transparentize)(t.colors.primary,.5)),outline:"none"}})),""),v=T()("div",{target:"e88czh81"})((({disabled:e,theme:t})=>({fontFamily:t.fonts.monospace,fontSize:t.fontSizes.sm,paddingBottom:t.spacing.twoThirdsSmFont,color:e?t.colors.gray:t.colors.primary,top:"-22px",position:"absolute",whiteSpace:"nowrap",backgroundColor:t.colors.transparent,lineHeight:t.lineHeights.base,fontWeight:"normal"})),""),j=T()("div",{target:"e88czh82"})((({theme:e})=>({paddingBottom:e.spacing.none,paddingLeft:e.spacing.none,paddingRight:e.spacing.none,paddingTop:e.spacing.twoThirdsSmFont,justifyContent:"space-between",alignItems:"center",display:"flex"})),""),V=T()("div",{target:"e88czh83"})((({disabled:e,theme:t})=>({lineHeight:t.lineHeights.base,fontWeight:"normal",fontSize:t.fontSizes.sm,fontFamily:t.fonts.monospace,color:e?t.colors.fadedText40:"inherit"})),"");var w=i(5);class R extends s.a.PureComponent{constructor(e){super(e),this.formClearHelper=new d.b,this.state=void 0,this.sliderRef=s.a.createRef(),this.thumbValueRef=s.a.createRef(),this.commitWidgetValueDebounced=void 0,this.commitWidgetValue=e=>{this.props.widgetMgr.setDoubleArrayValue(this.props.element,this.state.value,e)},this.onFormCleared=()=>{this.setState({value:this.props.element.default},(()=>this.commitWidgetValue({fromUi:!0})))},this.handleChange=({value:e})=>{this.setState({value:e},(()=>this.commitWidgetValueDebounced({fromUi:!0})))},this.renderThumb=s.a.forwardRef(((e,t)=>{const{$value:i,$thumbIndex:a}=e,s=this.formatValue(i[a]),n=Object(o.pick)(e,["role","style","aria-valuemax","aria-valuemin","aria-valuenow","tabIndex","onKeyUp","onKeyDown","onMouseEnter","onMouseLeave","draggable"]),r={};return(this.props.element.options.length>0||this.isDateTimeType())&&(r["aria-valuetext"]=s),this.thumbValueAlignment(),Object(w.jsx)(x,{...n,disabled:e.$disabled,ref:t,"aria-valuetext":s,children:Object(w.jsx)(v,{className:"StyledThumbValue","data-testid":"stThumbValue",disabled:e.$disabled,ref:this.thumbValueRef,children:s})})})),this.renderTickBar=()=>{const{disabled:e,element:t}=this.props,{max:i,min:a}=t;return Object(w.jsxs)(j,{"data-testid":"stTickBar",children:[Object(w.jsx)(V,{disabled:e,"data-testid":"stTickBarMin",children:this.formatValue(a)}),Object(w.jsx)(V,{disabled:e,"data-testid":"stTickBarMax",children:this.formatValue(i)})]})},this.render=()=>{const{disabled:e,element:t,theme:i,width:a,widgetMgr:s}=this.props,{colors:o,fonts:r,fontSizes:l,spacing:d}=i,h={width:a};return this.formClearHelper.manageFormClearListener(s,t.formId,this.onFormCleared),Object(w.jsxs)("div",{ref:this.sliderRef,className:"stSlider",style:h,children:[Object(w.jsx)(u.d,{label:t.label,disabled:e,children:t.help&&Object(w.jsx)(u.b,{children:Object(w.jsx)(b.a,{content:t.help,placement:g.b.TOP_RIGHT})})}),Object(w.jsx)(n.a,{min:t.min,max:t.max,step:t.step,value:this.value,onChange:this.handleChange,disabled:e,overrides:{Root:{style:{paddingTop:d.twoThirdsSmFont}},Thumb:this.renderThumb,Tick:{style:{fontFamily:r.monospace,fontSize:l.sm}},Track:{style:{paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:d.twoThirdsSmFont}},InnerTrack:{style:({$disabled:e})=>({height:"4px",...e?{background:o.transparentDarkenedBgMix60}:{}})},TickBar:this.renderTickBar}})]})},this.commitWidgetValueDebounced=Object(m.a)(200,this.commitWidgetValue.bind(this)),this.state={value:this.initialValue}}get initialValue(){const e=this.props.widgetMgr.getDoubleArrayValue(this.props.element);return void 0!==e?e:this.props.element.default}componentDidMount(){this.thumbValueAlignment(),this.props.element.setValue?this.updateFromProtobuf():this.commitWidgetValue({fromUi:!1})}componentDidUpdate(){this.maybeUpdateFromProtobuf()}componentWillUnmount(){this.formClearHelper.disconnect()}maybeUpdateFromProtobuf(){const{setValue:e}=this.props.element;e&&this.updateFromProtobuf()}updateFromProtobuf(){const{value:e}=this.props.element;this.props.element.setValue=!1,this.setState({value:e},(()=>{this.commitWidgetValue({fromUi:!1})}))}get value(){const{min:e,max:t}=this.props.element,{value:i}=this.state;let a=i[0],s=i.length>1?i[1]:i[0];return a>s&&(a=s),a<e&&(a=e),a>t&&(a=t),s<e&&(s=e),s>t&&(s=t),i.length>1?[a,s]:[a]}isDateTimeType(){const{dataType:e}=this.props.element;return e===h.q.DataType.DATETIME||e===h.q.DataType.DATE||e===h.q.DataType.TIME}formatValue(e){const{format:t,options:i}=this.props.element;return this.isDateTimeType()?p()(e/1e3).format(t):i.length>0?Object(l.sprintf)(t,i[e]):Object(l.sprintf)(t,e)}thumbValueAlignment(){const e=this.sliderRef.current,t=this.thumbValueRef.current;if(e&&t){const i=e.getBoundingClientRect(),a=t.getBoundingClientRect();t.style.left=a.left<i.left?"0":"",t.style.right=a.right>i.right?"0":""}}}var S=Object(r.withTheme)(R)}}]);